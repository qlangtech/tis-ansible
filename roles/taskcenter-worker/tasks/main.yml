---
# tasks file for taskcenter-worker
  - name: clear local temp dir
    file:
     path: /tmp/{{item}}
     state: absent
    with_items:
     - "tis-index-builder-yarn"
     - "tis-index-builder-yarn.tar.gz"
  
  - name: copy tis-index-builder-yarn
    copy: src="{{tis_release_dir}}/tis-index-builder-yarn.tar.gz" dest=/tmp/

  - name: unzip tis-index-builder-yarn tar
    unarchive:
     src: /tmp/tis-index-builder-yarn.tar.gz
     dest: /tmp/
     remote_src: yes
  
  
  - name: make dir localJarDir
    file: 
     path: '{{local_jar_dir}}'
     state: directory
       
  - name: synchronize jars in tis-index-builder-yarn
    synchronize:
      src: /tmp/tis-index-builder-yarn/
      dest: '{{local_jar_dir}}'
      delete: yes
    delegate_to: "{{ inventory_hostname }}"

  - name: set owner
    file:
      path: '{{local_jar_dir}}'
      owner: spring-boot
      recurse: yes
      group: spring-boot